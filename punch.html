<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link rel="stylesheet" type="text/css" href="css/mui.css"/>
</head>
<body>
    <script src="js/mui.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/getUrlParam.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
        var pid = UrlParam.paramValues("id");
        var data = "id=" + pid;
        var name = UrlParam.paramValues("name");
       //alert(id);
       mui.init()
    </script>
    <header class="mui-bar mui-bar-nav">
		<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		<h1 class="mui-title"> <script>document.write(name)</script> </h1>
	</header>
	<div class="mui-content">
        <script>
            mui.ajax('p.php', {
                        data: "id=" + pid,
						async:false,
                        dataType: 'json', //服务器返回json格式数据
                        type: 'post', //HTTP请求类型
                        timeout: 10000, //超时时间设置为10秒；
                        success: function (data) {
                            result = data; //js原生方法解析json字符串为json对象
                            arr = result.toString().split(',');
                        },
                    });
            for (let index = 0; index < arr.length; index++) {
                var html ="<button type='button' style='margin:4px 4px' class='mui-btn mui-btn-primary mui-btn-outlined' id="+ arr[index] +">" + arr[index] + "</button>"
                document.write(html);
                document.getElementById(arr[index]).addEventListener("tap", function () {
                    mui.ajax('ka.php', {
                        data: {
                            p: arr[index]
                        },
                        dataType: 'json', //服务器返回json格式数据
                        type: 'post', //HTTP请求类型
                        timeout: 10000, //超时时间设置为10秒；
                        success: function (data) {
                            var result = eval('(' + data + ')'); //js原生方法解析json字符串为json对象
                            if (result != 1) {
                                // 如果密码错误，提示一下信息 
                                mui.alert("用户名或密码错误", "登录错误", "关闭");
                                //mui.alert(result);
                                return;
                            }
                            mui.openWindow({
                                url: 'main.html',
                                id: 'main',
                            });
                        },
                        error: function (xhr, type, errorThrown) {}
                    });
                });
            }
        </script>
	</div>
</body>
</html>